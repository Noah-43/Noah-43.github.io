---
title: BaseCamp_6, 7주
excerpt: 리팩토링...웹 서버 스케일 아웃...
categories: feeling

image:
  teaser : everest.jpg
---

##### Sprint6...
개발 인생 처음으로 코드 리뷰를 받아봤다. 스스로 코드에 자신이 없었기 때문에 리뷰를 받기 전까지 너무 무서웠다.
리뷰를 진행하는데 우리 팀 코드리뷰 시간의 6할 정도는 내가 써버린 것 같다. 그만큼 부족한 부분이 많았지만
그 동안 코드를 짜면서 내가 잘못 알고 있는 부분이 어떤 것인지 어떤 방법이 효율적인지 등을 많이 알아갈 수 있어 매우 유익했다.
리뷰 후에는 소나큐브를 확인하면서 코드 리팩토링과 테스트 코드를 작성하는 시간을 가졌는데,
Mock 객체를 이용해서 테스트 코드를 작성하는게 처음에는 어떻게 사용을 해야하는건지 도저히 이해가 안가고 어려웠지만 이해하고 사용하니 너무 편했다.
테스트 코드는 다른 팀원과 기능을 서로 바꿔서 작성했는데 개발을 좀 수월한 기능을 맡아서 했더니 다른 팀원의 코드를 뜯어보는 것에 생각보다 많은 시간이 들었다.
풀 리퀘스트 확인할 때 좀 더 자세히 확인할 걸... 하는 후회도 들었다...ㅎ 
코드 리뷰 뿐만 아니라 다른 사람의 코드를 보는 것도 공부가 많이 된 한 주 였다.

##### Sprint7...
이전까지는 친구들과 작은 프로젝트 정도만 구현해 봤기 때문에 로드 밸런싱을 해야하는 상황 같은 것은 고려해 본 적이 없었다.
그래서 이번에 서버를 두 대로 늘리면 어떤 문제가 생기고 어떻게 해결해야 할까 하는 고민을 해봤고
이를 위해 두 서버가 세션과, 스토리지를 공유할 수 있도록 기존의 코드를 수정하는 작업을 진행하였다.
세션 처리를 위해 레디스를 사용해 보게 되었는데, 스프링에서는 다양한 방법으로 레디스를 사용할 수 있었다.
여러 방법 중 디비로 세션 처리를 하는 방법과 거의 유사하게 코드를 작성할 수 있는 방법이 있어서 시도를 해봤는데.... 
버그가 있어 약 네시간 동안 오류만 찾다가 결국 포기하고 다른 방법을 이용하니... 한 시간도 채 걸리지 않아 많이 허탈했다.
NHN Cloud Deploy를 통해 배포도 했는데, 처음 Deploy 해보는 과정에서 kill 명령이 생각대로 먹지 않아 많이 애먹었지만
그렇게 작성해두니 이제는 클릭 한 번 하면 배포가 되니까 정말 편하다... 욕심이 생겨서 마스터 브랜치에 머지만 하면 동작하도록 해 보고도 싶다.
