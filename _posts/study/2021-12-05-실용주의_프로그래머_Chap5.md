---
title: 실용주의_프로그래머_Chap5(-ing)
excerpt: 실용주의 프로그래머 책 5장 정리
categories: study
---

# 5장. 구부러지거나 부러지거나

## 26. 결합도 줄이기와 디미터 법칙

코드를 모듈로 구성하고, 이들 간의 상호작용을 제한하자. 그러면 한 모듈이 변경되거나 교체되어도 다른 모듈들은 변경 없이 수행될 수 있다. 불필요한 의존이 많은 시스템은 유지 보수가 어렵고, 이로 인한 비용이 많이 들며, 시스템 자체가 매우 불안정한 경향이 있다.

디미터 함수 법칙은 프로그램에서 모듈간의 결합도를 최소화하려 한다. 이 법칙은 한 객체가 제공하는 메서드에 접근하기 위해 또 다른 객체들을 통하는 것을 허용하지 않는다. 응답집합(클래스의 메서드가 직접 호출하는 함수의 수)이 큰 클래스는 작은 클래스 보다 에러를 발생시키기 쉽다. 디미터 법칙을 따르면 함수를 호출하는 클래스의 응답집합 크기를 줄일 수 있어, 좀 더 에러가 적은 클래스를 만들 수 있다. 단, 디미터 법칙 또한 우리가 만들려는 애플리케이션에 맞게 장/단점을 고려해 적용해야 한다.



## 27. 메타프로그래밍

세부사항을 코드에서 몰아내고 코드를 설정가능하게, 변화에 쉽게 적응하도록 사용하자. 시스템의 아이템들은 통합하거나 엔지니어링하지 말고 설정 옵션으로 구현하는 것이 좋다. 애플리케이션을 기술하는 모든 데이터, 메타데이터를 이용하자. 메타데이터를 사용해서 애플리케이션을 설정하고 실행하자. 이로써 더 동적이고 적응가능한 프로그램을 만들 수 있다. 코드에는 추상화를, 메타데이터에는 세부 내용을 담도록 하자.



## 28. 시간적 결합

시간에는 우리에게 의미 있는 동시성과 순서 두가지 측면이 있다. 우리는 동시성을 허용할 필요가 있고 시간이나 순서에 따른 의존성의 결합을 끊는 방법을 생각할 필요가 있다. 그렇게 함으로써 유연성을 얻고, 작업흐름 분석, 아키텍처, 설계, 배치와 같은 개발의 여러 측면에서 시간과 관련된 모든 의존성도 줄일 수 있다.

요구사항 분석의 일부로서 사용자들의 작업흐름을 모델화 하고 분석하는 작업이 필요하다. UML 활동 다이어그램 같은 표기법을 사용해서 사용자들이 기술해 준 작업흐름을 기록하는 것이 한 방법이다. 활동 다이어그램을 사용하면 동시에 수행될 수 있지만 아직 그렇지 않은 활동들을 찾아내서 병렬성을 극대화 할 수 있다. 작업흐름을 분석해 동시성을 개선하자.

시간적 결합 끊기를 활용하자. hungry consumer 모델은 중앙 일정 관리자 대신 여러 개의 독립적인 소비자 작업들과 중앙집중식 작업 큐를 사용한다. 각 소비자 작업은 큐에서 하나씩 가져가 처리하고, 각 작업은 일을 마치고 나면 다른 것을 다시 큐에서 가져온다. 이런 식이면, 어떤 작업 하나가 버벅대도 다른 작업들이 큐에서 일을 가져갈 수 있고, 개별 컴포넌트들은 자기 속도에 맞춰 일을 진행할 수 있다. 각 컴포넌트들은 서로 시간적으로 결합이 끊기는 것이다. 컴포넌트 대신 서비스를 즉, 잘 정의되고 일관성 있는 인터페이스 뒤에서 일하는 독립적이고 동시적인 객체들을 만들자. 서비스를 사용해 설계하자.

언제나 동시성을 고려해 설계하자. 동시성을 염두에 두면 여러가지 일들을 더 주의 싶게 생각하게 되고, 시간에 관련된 의존성들이 보이기 시작한다. 동시성과 시간 순서에 따른 의존성을 고려하는 것은 더 깔끔한 인터페이스 설계에 도움을 주기도 한다. 동시성을 허용하도록 설계한다면, 확장가능성이나 성능에 대한 요구사항이 들어올 때 더쉽게 그것에 맞출 수 있고, 깔끔한 설계의 이점을 누리게 된다.


